import{_ as B}from"./DqwEFAkb.js";import{r as a,g as P,j as R,c as p,a as e,d as $,b as j,w as z,k as i,t as h,l as q,v as w,m as g,F as A,n as J,p as N,o as c}from"./X39MRmJS.js";const L={id:"parent-wrapper"},I={id:"point-wrapper"},U={class:"quest-done"},D={style:{"font-size":"4rem"}},E={id:"out-wrapper"},F={id:"out-items-wrapper"},M={class:"quest-item"},Q={id:"quest-wrapper"},G={id:"quest-items-wrapper"},H={class:"quest-items"},K={key:0,class:"quest-category"},W={key:1,class:"quest-item"},X={class:"quest-title"},Y={class:"quest-point"},Z=["onClick"],nt={__name:"index",setup(tt){const T=a(null),_=a(null),x=a(null);let v=a(null);const k=a(!0),S=a(null),y=P();var l="",r=0;const o=y.query.at?y.query.at:"",b=function(s){return`/record?at=${s}`},d=function(s){return{title:s.split("- ")[1]?.split(":")[0],point:parseInt(s.split(": ")[1]?.split("í¬ì¸íŠ¸")[0])}},O=async function(s){await $fetch("https://stella.place/api/notes/create",{method:"POST",server:!1,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({text:`ðŸŒ¸ #dailyquest ì—ì„œ ${d(s).title} ì„(ë¥¼) ì™„ë£Œí•˜ê³  ${d(s).point} í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”!
ì†Œì§€ í¬ì¸íŠ¸: ðŸª™ ${v+d(s).point}
#${username}_dailyquest`,visibility:"followers"})}),N()},V=async function(s,t){await $fetch("https://stella.place/api/notes/create",{method:"POST",server:!1,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({text:`ðŸª½ #dailyquest ì—ì„œ ${s} ì„(ë¥¼) ëª©ì ìœ¼ë¡œ ${t} í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”!
ì†Œì§€ í¬ì¸íŠ¸: ðŸª™ ${v-t}
#${username}_dailyquest`,visibility:"followers"})}),N()};return R(async()=>{if(!o){S.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),k.value=!1;return}const s=await $fetch("https://stella.place/api/i",{method:"POST",server:!1,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({})}),t=s.username;T.value=s;const m=((await $fetch("https://stella.place/api/notes/search-by-tag",{method:"POST",server:!1,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${t}_dq_list`})}))[0]?.text.split("```\n")[1]?.split("\n```")[0]).split(`
`);_.value=m;let u=await $fetch("https://stella.place/api/notes/search-by-tag",{method:"POST",server:!1,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${t}_dailyquest`})});u=u.filter(C=>C.user.username==t),x.value=u,u.length!==0&&(v.value=parseInt(u[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(s,t)=>{const f=B;return c(),p("div",L,[e("div",I,[e("div",null,[t[4]||(t[4]=$("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",U,[j(f,{to:b(i(o))},{default:z(()=>[...t[3]||(t[3]=[$("ì‚¬ìš©ë‚´ì—­",-1)])]),_:1},8,["to"])])]),e("div",D,"ðŸª™ "+h(i(v)),1)]),e("div",E,[e("div",F,[t[5]||(t[5]=e("div",{class:"quest-category"},[e("h3",null,"ì†Œëª¨í•˜ê¸°")],-1)),e("div",M,[q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>g(l)?l.value=n:l=n),class:"quest-title",placeholder:"í•­ëª©"},null,512),[[w,i(l)]]),q(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>g(r)?r.value=n:r=n),class:"quest-point",placeholder:"ê¸ˆì•¡"},null,512),[[w,i(r)]]),e("div",{class:"quest-done",onClick:t[2]||(t[2]=n=>V(i(l),i(r)))},"ì†Œëª¨")])])]),e("div",Q,[t[6]||(t[6]=e("h2",null,"ðŸŒ¸ ë‚´ í€˜ìŠ¤íŠ¸ ðŸŒ¸",-1)),e("div",G,[(c(!0),p(A,null,J(_.value,n=>(c(),p("div",H,[n[0]!=="-"?(c(),p("div",K,[e("h3",null,h(n),1)])):(c(),p("div",W,[e("div",X,h(d(n).title),1),e("div",Y,h(d(n).point),1),e("div",{class:"quest-done",onClick:m=>O(n)},"ì™„ë£Œ",8,Z)]))]))),256))])])])}}};export{nt as default};
