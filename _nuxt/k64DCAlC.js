import{_ as g}from"./a4PTbSyl.js";import{g as k,r as n,j as w,c as r,a as s,d as m,b as N,w as $,k as d,t as o,F as T,n as I,o as v}from"./286W-JsO.js";const B={id:"parent-wrapper"},C={id:"point-wrapper"},R={class:"quest-done"},S={style:{"font-size":"4rem"}},V={id:"quest-wrapper"},b={id:"quest-items-wrapper"},O={class:"quest-titles"},j={class:"quest-item"},z={class:"quest-items"},L={class:"quest-item"},P={class:"quest-title"},A={class:"quest-point"},M={__name:"record",setup(E){const c=k(),i=c.query.at?c.query.at:"",q=n(null),a=n(null),f=n(null);let _=n(null);const y=n(!0),h=n(null),x=function(e){return`/?at=${e}`},p=function(e){let t;return e.text.split(" #")[0]=="ðŸŒ¸"?t={title:e.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:parseInt(e.text.split("ì„(ë¥¼) ì™„ë£Œí•˜ê³ ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”")[0]),final:parseInt(e.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:e.text.split(" #")[0]=="ðŸª½"?t={title:e.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:-1*parseInt(e.text.split("ì„(ë¥¼) ëª©ì ìœ¼ë¡œ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”")[0]),final:parseInt(e.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:t={title:"",point:0,final:0},t};return w(async()=>{if(!i){h.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),y.value=!1;return}const e=await $fetch("https://stella.place/api/i",{method:"POST",server:!1,headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({})});a.value=e.username,q.value=e;let t=await $fetch("https://stella.place/api/notes/search-by-tag",{method:"POST",server:!1,headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${a.value}_dailyquest`})});t=t.filter(u=>u.user.username==a.value),f.value=t,t.length!==0&&(_.value=parseInt(t[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(e,t)=>{const u=g;return v(),r("div",B,[s("div",C,[s("div",null,[t[3]||(t[3]=m("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),s("span",R,[N(u,{to:x(d(i))},{default:$(()=>[...t[2]||(t[2]=[m("ëŒì•„ê°€ê¸°",-1)])]),_:1},8,["to"])])]),s("div",S,"ðŸª™ "+o(d(_)),1)]),s("div",V,[t[6]||(t[6]=s("h2",null,"ðŸŒ¸ ë‚´ì—­ ðŸŒ¸",-1)),s("div",b,[s("div",O,[s("div",j,[t[4]||(t[4]=s("div",{class:"quest-title"}," ë‚´ì—­ ",-1)),t[5]||(t[5]=s("div",{class:"quest-point"}," ì¦ê° ",-1)),s("div",{class:"quest-point",onClick:t[0]||(t[0]=l=>e.sendNote(e.quest))},"ìµœì¢…")])]),(v(!0),r(T,null,I(d(f),l=>(v(),r("div",z,[s("div",L,[s("div",P,o(p(l).title),1),s("div",A,o(p(l).point),1),s("div",{class:"quest-point",onClick:t[1]||(t[1]=F=>e.sendNote(e.quest))},o(p(l).final),1)])]))),256))])])])}}};export{M as default};
