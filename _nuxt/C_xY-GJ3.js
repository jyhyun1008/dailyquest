import{_ as g}from"./5u0jBG21.js";import{g as k,r as n,j as w,c as u,a as e,d as m,b as N,w as $,k as d,t as o,F as T,n as I,o as c}from"./DwFpAqxh.js";const B={id:"parent-wrapper"},C={id:"point-wrapper"},R={class:"quest-done"},S={style:{"font-size":"4rem"}},V={id:"quest-wrapper"},b={id:"quest-items-wrapper"},O={class:"quest-titles"},j={class:"quest-item"},z={class:"quest-items"},L={class:"quest-item"},P={class:"quest-title"},A={class:"quest-point"},M={__name:"record",setup(E){const f=k(),i=f.query.at?f.query.at:"",q=n(null),a=n(null),v=n(null);let _=n(null);const y=n(!0),h=n(null),x=function(s){return`/?at=${s}`},p=function(s){let t;return s.text.split(" #")[0]=="ðŸŒ¸"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:parseInt(s.text.split("ì„(ë¥¼) ì™„ë£Œí•˜ê³ ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:s.text.split(" #")[0]=="ðŸª½"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:-1*parseInt(s.text.split("ì„(ë¥¼) ëª©ì ìœ¼ë¡œ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:t={title:"",point:0,final:0},t};return w(async()=>{if(!i){h.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),y.value=!1;return}const s=await $fetch("https://stella.place/api/i",{method:"POST",server:!1,headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({})});a.value=s.username,q.value=s;let t=await $fetch("https://stella.place/api/notes/search-by-tag",{method:"POST",server:!1,headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${a}_dailyquest`})});t=t.filter(r=>r.user.username==a),v.value=t,t.length!==0&&(_.value=parseInt(t[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(s,t)=>{const r=g;return c(),u("div",B,[e("div",C,[e("div",null,[t[3]||(t[3]=m("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",R,[N(r,{to:x(d(i))},{default:$(()=>[...t[2]||(t[2]=[m("ëŒì•„ê°€ê¸°",-1)])]),_:1},8,["to"])])]),e("div",S,"ðŸª™ "+o(d(_)),1)]),e("div",V,[t[6]||(t[6]=e("h2",null,"ðŸŒ¸ ë‚´ì—­ ðŸŒ¸",-1)),e("div",b,[e("div",O,[e("div",j,[t[4]||(t[4]=e("div",{class:"quest-title"}," ë‚´ì—­ ",-1)),t[5]||(t[5]=e("div",{class:"quest-point"}," ì¦ê° ",-1)),e("div",{class:"quest-point",onClick:t[0]||(t[0]=l=>s.sendNote(s.quest))},"ìµœì¢…")])]),(c(!0),u(T,null,I(d(v),l=>(c(),u("div",z,[e("div",L,[e("div",P,o(p(l).title),1),e("div",A,o(p(l).point),1),e("div",{class:"quest-point",onClick:t[1]||(t[1]=F=>s.sendNote(s.quest))},o(p(l).final),1)])]))),256))])])])}}};export{M as default};
