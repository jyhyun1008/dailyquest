import{_ as x}from"./BDh3DLF0.js";import{g as T,r as i,j as k,c as r,a as e,d as f,b as I,w,t as l,l as q,F as S,n as $,o as d}from"./Bk7B2AK8.js";const N={id:"parent-wrapper"},B={id:"point-wrapper"},C={class:"quest-done"},R={style:{"font-size":"4rem"}},V={id:"quest-wrapper"},b={id:"quest-items-wrapper"},A={class:"quest-titles"},O={class:"quest-item"},j={class:"quest-items"},z={class:"quest-item"},L={class:"quest-date"},P={class:"quest-title"},E={class:"quest-point"},U={__name:"record",setup(F){const v=T(),a=i(null),_=i(null),u=i(null),c=i(null);let m=i(null);const g=i(!0),y=i(null),h=function(){return"/"},o=function(s){let t;return s.text.split(" #")[0]=="ðŸŒ¸"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:parseInt(s.text.split("ì„(ë¥¼) ì™„ë£Œí•˜ê³ ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0]),date:s.createdAt.split("T")[0]}:s.text.split(" #")[0]=="ðŸª½"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:-1*parseInt(s.text.split("ì„(ë¥¼) ëª©ì ìœ¼ë¡œ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0]),date:s.createdAt.split("T")[0]}:t={title:"",point:0,final:0,date:""},t};return k(async()=>{if(a.value=localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):v.query.at?v.query.at:"",!a){y.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),g.value=!1;return}const s=await $fetch(`https://${localStorage.getItem("host")}/api/i`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"},body:JSON.stringify({})});u.value=s.username,_.value=s;let t=await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${a.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${u.value}_dailyquest`,limit:100})});t=t.filter(p=>p.user.username==u.value),c.value=t,t.length!==0&&(m.value=parseInt(t[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(s,t)=>{const p=x;return d(),r("div",N,[e("div",B,[e("div",null,[t[3]||(t[3]=f("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",C,[I(p,{to:h()},{default:w(()=>[...t[2]||(t[2]=[f("ëŒì•„ê°€ê¸°",-1)])]),_:1},8,["to"])])]),e("div",R,"ðŸª™ "+l(q(m)),1)]),e("div",V,[t[7]||(t[7]=e("h2",null,"ðŸŒ¸ ë‚´ì—­ ðŸŒ¸",-1)),t[8]||(t[8]=e("div",null,"ìµœëŒ€ 100ê±´ê¹Œì§€ ë³´ì—¬ì§‘ë‹ˆë‹¤.",-1)),e("div",b,[e("div",A,[e("div",O,[t[4]||(t[4]=e("div",{class:"quest-date"}," ì¼ìž ",-1)),t[5]||(t[5]=e("div",{class:"quest-title"}," ë‚´ì—­ ",-1)),t[6]||(t[6]=e("div",{class:"quest-point"}," ì¦ê° ",-1)),e("div",{class:"quest-point",onClick:t[0]||(t[0]=n=>s.sendNote(s.quest))},"ìµœì¢…")])]),(d(!0),r(S,null,$(q(c),n=>(d(),r("div",j,[e("div",z,[e("div",L,l(o(n).date),1),e("div",P,l(o(n).title),1),e("div",E,l(o(n).point),1),e("div",{class:"quest-point",onClick:t[1]||(t[1]=J=>s.sendNote(s.quest))},l(o(n).final),1)])]))),256))])])])}}};export{U as default};
