import{_ as R}from"./CTzCITxK.js";import{r as a,g as j,j as z,c as p,a as e,d as m,b as $,w as q,t as h,k as w,v as S,l as f,m as T,F as A,n as J,p as k,o as v}from"./CegRrspc.js";const L={id:"parent-wrapper"},U={id:"point-wrapper"},D={class:"quest-done"},E={style:{"font-size":"4rem"}},F={id:"out-wrapper"},M={id:"out-items-wrapper"},Q={class:"quest-item"},G={id:"quest-wrapper"},H={class:"button-flex"},K={class:"quest-button"},W={id:"quest-items-wrapper"},X={class:"quest-items"},Y={key:0,class:"quest-category"},Z={key:1,class:"quest-item"},tt={class:"quest-title"},et={class:"quest-point"},st=["onClick"],lt={__name:"index",setup(ot){const x=a(null),n=a(null),g=a(null),N=a(null),r=a(null),b=a(!0),I=a(null),y=j();var u="",d=0;const l=a(null),O=function(){return"/record/"},c=function(o){return{title:o.split("- ")[1]?.split(":")[0],point:parseInt(o.split(": ")[1]?.split("í¬ì¸íŠ¸")[0])}},C=async function(o){await $fetch(`https://${localStorage.getItem("host")}/api/notes/create`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({text:`ðŸŒ¸ #dailyquest ì—ì„œ ${c(o).title} ì„(ë¥¼) ì™„ë£Œí•˜ê³  ${c(o).point} í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”!
ì†Œì§€ í¬ì¸íŠ¸: ðŸª™ ${r.value+c(o).point}
#${n.value}_dailyquest`,visibility:"followers"})}),k()},V=function(){localStorage.clear(),location.href="https://quest.howeverina.studio/login"},B=async function(o,t){await $fetch(`https://${localStorage.getItem("host")}/api/notes/create`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({text:`ðŸª½ #dailyquest ì—ì„œ ${o} ì„(ë¥¼) ëª©ì ìœ¼ë¡œ ${t} í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”!
ì†Œì§€ í¬ì¸íŠ¸: ðŸª™ ${r.value-t}
#${n.value}_dailyquest`,visibility:"followers"})}),k()};return z(async()=>{if(l.value=localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):y.query.at?y.query.at:"",!localStorage.getItem("host"))I.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),b.value=!1,location.href="https://quest.howeverina.studio/login/";else{const o=await $fetch(`https://${localStorage.getItem("host")}/api/i`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({})});n.value=o.username,x.value=o;const s=(await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${n.value}_dq_list`})}))[0]?.text.split("```\n")[1]?.split("\n```")[0]?.split(`
`);g.value=s;let i=await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${n.value}_dailyquest`})});i=i.filter(P=>P.user.username==n.value),N.value=i,r.value=0,i.length!==0&&(r.value=parseInt(i[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}}),(o,t)=>{const _=R;return v(),p("div",L,[e("div",U,[e("div",null,[t[5]||(t[5]=m("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",D,[$(_,{to:O()},{default:q(()=>[...t[4]||(t[4]=[m("ë‚´ì—­",-1)])]),_:1},8,["to"])])]),e("div",E,"ðŸª™ "+h(r.value),1)]),e("div",F,[e("div",M,[t[6]||(t[6]=e("div",{class:"quest-category"},[e("h3",null,"ì†Œëª¨í•˜ê¸°")],-1)),e("div",Q,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>T(u)?u.value=s:u=s),class:"quest-title",placeholder:"í•­ëª©"},null,512),[[S,f(u)]]),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>T(d)?d.value=s:d=s),class:"quest-point",placeholder:"ê¸ˆì•¡"},null,512),[[S,f(d)]]),e("div",{class:"quest-done",onClick:t[2]||(t[2]=s=>B(f(u),f(d)))},"ì†Œëª¨")])])]),e("div",G,[t[8]||(t[8]=e("h2",null,"ðŸŒ¸ ë‚´ í€˜ìŠ¤íŠ¸ ðŸŒ¸",-1)),e("div",H,[e("span",K,[$(_,{to:"/update/"},{default:q(()=>[...t[7]||(t[7]=[m("ëª©ë¡ ìˆ˜ì •í•˜ê¸°",-1)])]),_:1})]),e("span",{class:"quest-button",onClick:t[3]||(t[3]=s=>V())},"ë¡œê·¸ì•„ì›ƒ")]),e("div",W,[(v(!0),p(A,null,J(g.value,s=>(v(),p("div",X,[s[0]!=="-"?(v(),p("div",Y,[e("h3",null,h(s),1)])):(v(),p("div",Z,[e("div",tt,h(c(s).title),1),e("div",et,h(c(s).point),1),e("div",{class:"quest-done",onClick:i=>C(s)},"ì™„ë£Œ",8,st)]))]))),256))])])])}}};export{lt as default};
