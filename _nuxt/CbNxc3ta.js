import{_ as R}from"./BDh3DLF0.js";import{r as a,g as j,j as z,c,a as e,d as f,b as g,w as y,t as _,k as w,v as S,l as m,m as T,F as A,n as J,p as b,o as v}from"./Bk7B2AK8.js";const L={id:"parent-wrapper"},U={id:"point-wrapper"},D={class:"quest-done"},E={style:{"font-size":"4rem"}},F={id:"out-wrapper"},M={id:"out-items-wrapper"},Q={class:"quest-item"},G={id:"quest-wrapper"},H={class:"button-flex"},K={class:"quest-button"},W={class:"quest-button"},X={id:"quest-items-wrapper"},Y={class:"quest-items"},Z={key:0,class:"quest-category"},tt={key:1,class:"quest-item"},et={class:"quest-title"},st={class:"quest-point"},ot=["onClick"],lt={__name:"index",setup(at){const k=a(null),n=a(null),$=a(null),x=a(null),r=a(null),N=a(!0),I=a(null),q=j();var u="",d=0;const i=a(null),O=function(){return"/record/"},p=function(o){return{title:o.split("- ")[1]?.split(":")[0],point:parseInt(o.split(": ")[1]?.split("í¬ì¸íŠ¸")[0])}},C=async function(o){await $fetch(`https://${localStorage.getItem("host")}/api/notes/create`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({text:`ðŸŒ¸ #dailyquest ì—ì„œ ${p(o).title} ì„(ë¥¼) ì™„ë£Œí•˜ê³  ${p(o).point} í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”!
ì†Œì§€ í¬ì¸íŠ¸: ðŸª™ ${r.value+p(o).point}
#${n.value}_dailyquest`,visibility:"followers"})}),b()},V=function(){window.confirm("ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(localStorage.clear(),location.href="https://quest.howeverina.studio/login")},B=async function(o,t){await $fetch(`https://${localStorage.getItem("host")}/api/notes/create`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({text:`ðŸª½ #dailyquest ì—ì„œ ${o} ì„(ë¥¼) ëª©ì ìœ¼ë¡œ ${t} í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”!
ì†Œì§€ í¬ì¸íŠ¸: ðŸª™ ${r.value-t}
#${n.value}_dailyquest`,visibility:"followers"})}),b()};return z(async()=>{if(i.value=localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):q.query.at?q.query.at:"",!localStorage.getItem("host"))I.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),N.value=!1,location.href="https://quest.howeverina.studio/login/";else{const o=await $fetch(`https://${localStorage.getItem("host")}/api/i`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({})});n.value=o.username,k.value=o;const s=(await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${n.value}_dq_list`})}))[0]?.text.split("```\n")[1]?.split("\n```")[0]?.split(`
`);$.value=s;let l=await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${n.value}_dailyquest`})});l=l.filter(P=>P.user.username==n.value),x.value=l,r.value=0,l.length!==0&&(r.value=parseInt(l[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}}),(o,t)=>{const h=R;return v(),c("div",L,[e("div",U,[e("div",null,[t[5]||(t[5]=f("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",D,[g(h,{to:O()},{default:y(()=>[...t[4]||(t[4]=[f("ë‚´ì—­",-1)])]),_:1},8,["to"])])]),e("div",E,"ðŸª™ "+_(r.value),1)]),e("div",F,[e("div",M,[t[6]||(t[6]=e("div",{class:"quest-category"},[e("h3",null,"ì†Œëª¨í•˜ê¸°")],-1)),e("div",Q,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>T(u)?u.value=s:u=s),class:"quest-title",placeholder:"í•­ëª©"},null,512),[[S,m(u)]]),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>T(d)?d.value=s:d=s),class:"quest-point",placeholder:"ê¸ˆì•¡"},null,512),[[S,m(d)]]),e("div",{class:"quest-done",onClick:t[2]||(t[2]=s=>B(m(u),m(d)))},"ì†Œëª¨")])])]),e("div",G,[t[9]||(t[9]=e("h2",null,"ðŸŒ¸ ë‚´ í€˜ìŠ¤íŠ¸ ðŸŒ¸",-1)),e("div",H,[e("span",K,[g(h,{to:"/about/"},{default:y(()=>[...t[7]||(t[7]=[f("ì†Œê°œ",-1)])]),_:1})]),e("span",W,[g(h,{to:"/update/"},{default:y(()=>[...t[8]||(t[8]=[f("ëª©ë¡ ìˆ˜ì •í•˜ê¸°",-1)])]),_:1})]),e("span",{class:"quest-button",onClick:t[3]||(t[3]=s=>V())},"ë¡œê·¸ì•„ì›ƒ")]),e("div",X,[(v(!0),c(A,null,J($.value,s=>(v(),c("div",Y,[s[0]!=="-"?(v(),c("div",Z,[e("h3",null,_(s),1)])):(v(),c("div",tt,[e("div",et,_(p(s).title),1),e("div",st,_(p(s).point),1),e("div",{class:"quest-done",onClick:l=>C(s)},"ì™„ë£Œ",8,ot)]))]))),256))])])])}}};export{lt as default};
