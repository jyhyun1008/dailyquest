import{_ as N}from"./B0wQWF-1.js";import{r as a,g as I,j as V,c as u,a as e,d as m,b as y,w as q,t as p,k as O,v as B,l as $,m as L,F as R,n as j,o as d}from"./DE95QB40.js";const C={id:"parent-wrapper"},z={id:"point-wrapper"},P={class:"quest-done"},A={style:{"font-size":"4rem"}},J={id:"quest-wrapper"},E={class:"button-flex"},D={class:"quest-button"},F={id:"quest-items-wrapper"},M={class:"quest-items"},U={key:0,class:"quest-category"},Q={key:1,class:"quest-item"},G={class:"quest-title"},H={class:"quest-point"},Y={__name:"update",setup(K){const w=a(null),n=a(null),c=a(null),S=a(null),v=a(null),T=a(!0),k=a(null),_=I();var i="";const l=a(null),x=function(){return"/record/"},g=function(o){return{title:o.split("- ")[1]?.split(":")[0],point:parseInt(o.split(": ")[1]?.split("í¬ì¸íŠ¸")[0])}},b=async function(o){await $fetch(`https://${localStorage.getItem("host")}/api/notes/create`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({text:`${n.value}ì˜ #dailyquest ì˜ˆìš”!
#${n.value}_dq_list
\`\`\`
${o}
\`\`\``,visibility:"specified"})}),location.href="https://quest.howeverina.studio/"};return V(async()=>{if(l.value=localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):_.query.at?_.query.at:"",!l){k.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),T.value=!1;return}const o=await $fetch(`https://${localStorage.getItem("host")}/api/i`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({})});n.value=o.username,w.value=o;const s=(await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${n.value}_dq_list`})}))[0]?.text.split("```\n")[1]?.split("\n```")[0]?.split(`
`);c.value=s,i=s?s.join(`
`):`ì¹´í…Œê³ ë¦¬
- í•­ëª©1: 100í¬ì¸íŠ¸`,document.querySelector("#quest-list").addEventListener("input",f=>{console.log("dd"),c.value=f.target.value.split(`
`)});let r=await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${l.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${n.value}_dailyquest`})});r=r.filter(f=>f.user.username==n.value),S.value=r,v.value=0,r.length!==0&&(v.value=parseInt(r[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(o,t)=>{const h=N;return d(),u("div",C,[e("div",z,[e("div",null,[t[3]||(t[3]=m("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",P,[y(h,{to:x()},{default:q(()=>[...t[2]||(t[2]=[m("ë‚´ì—­",-1)])]),_:1},8,["to"])])]),e("div",A,"ðŸª™ "+p(v.value),1)]),e("div",J,[t[6]||(t[6]=e("h2",null,"ðŸŒ¸ ë‚´ í€˜ìŠ¤íŠ¸ ðŸŒ¸",-1)),O(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>L(i)?i.value=s:i=s),id:"quest-list"},null,512),[[B,$(i)]]),e("div",E,[e("span",D,[y(h,{to:"https://quest.howeverina.studio/"},{default:q(()=>[...t[4]||(t[4]=[m("ëŒì•„ê°€ê¸°",-1)])]),_:1})]),e("span",{class:"quest-button",onClick:t[1]||(t[1]=s=>b($(i)))},"ìˆ˜ì •ì™„ë£Œ")]),t[7]||(t[7]=e("h2",null,"ðŸŒ¸ ë¯¸ë¦¬ë³´ê¸° ðŸŒ¸",-1)),e("div",F,[(d(!0),u(R,null,j(c.value,s=>(d(),u("div",M,[s[0]!=="-"?(d(),u("div",U,[e("h3",null,p(s),1)])):(d(),u("div",Q,[e("div",G,p(g(s).title),1),e("div",H,p(g(s).point),1),t[5]||(t[5]=e("div",{class:"quest-done"},"ì™„ë£Œ",-1))]))]))),256))])])])}}};export{Y as default};
