import{_ as x}from"./IueyXeH8.js";import{g,r as o,j as k,c as r,a as e,d as _,b as w,w as N,k as u,t as a,F as $,n as T,o as d}from"./nX9OX9fB.js";const I={id:"parent-wrapper"},B={id:"point-wrapper"},C={class:"quest-done"},R={style:{"font-size":"4rem"}},S={id:"quest-wrapper"},V={id:"quest-items-wrapper"},b={class:"quest-titles"},O={class:"quest-item"},j={class:"quest-items"},z={class:"quest-item"},L={class:"quest-title"},P={class:"quest-point"},D={__name:"record",setup(A){const c=g(),l=c.query.at?c.query.at:"",m=o(null),f=o(null);let v=o(null);const q=o(!0),y=o(null),h=function(s){return`/?at=${s}`},p=function(s){let t;return s.text.split(" #")[0]=="ðŸŒ¸"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:parseInt(s.text.split("ì„(ë¥¼) ì™„ë£Œí•˜ê³ ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:s.text.split(" #")[0]=="ðŸª½"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:-1*parseInt(s.text.split("ì„(ë¥¼) ëª©ì ìœ¼ë¡œ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:t={title:"",point:0,final:0},t};return k(async()=>{if(!l){y.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),q.value=!1;return}const s=await $fetch("https://stella.place/api/i",{method:"POST",server:!1,headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({})}),t=s.username;m.value=s;let n=await $fetch("https://stella.place/api/notes/search-by-tag",{method:"POST",server:!1,headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${t}_dailyquest`})});n=n.filter(i=>i.user.username==t),f.value=n,n.length!==0&&(v.value=parseInt(n[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(s,t)=>{const n=x;return d(),r("div",I,[e("div",B,[e("div",null,[t[3]||(t[3]=_("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",C,[w(n,{to:h(u(l))},{default:N(()=>[...t[2]||(t[2]=[_("ëŒì•„ê°€ê¸°",-1)])]),_:1},8,["to"])])]),e("div",R,"ðŸª™ "+a(u(v)),1)]),e("div",S,[t[6]||(t[6]=e("h2",null,"ðŸŒ¸ ë‚´ì—­ ðŸŒ¸",-1)),e("div",V,[e("div",b,[e("div",O,[t[4]||(t[4]=e("div",{class:"quest-title"}," ë‚´ì—­ ",-1)),t[5]||(t[5]=e("div",{class:"quest-point"}," ì¦ê° ",-1)),e("div",{class:"quest-point",onClick:t[0]||(t[0]=i=>s.sendNote(s.quest))},"ìµœì¢…")])]),(d(!0),r($,null,T(u(f),i=>(d(),r("div",j,[e("div",z,[e("div",L,a(p(i).title),1),e("div",P,a(p(i).point),1),e("div",{class:"quest-point",onClick:t[1]||(t[1]=E=>s.sendNote(s.quest))},a(p(i).final),1)])]))),256))])])])}}};export{D as default};
