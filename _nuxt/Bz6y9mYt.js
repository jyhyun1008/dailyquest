import{_ as x}from"./CTzCITxK.js";import{g as k,r as n,j as I,c as p,a as e,d as m,b as w,w as S,t as o,l as _,F as T,n as $,o as d}from"./CegRrspc.js";const N={id:"parent-wrapper"},B={id:"point-wrapper"},C={class:"quest-done"},R={style:{"font-size":"4rem"}},V={id:"quest-wrapper"},b={id:"quest-items-wrapper"},O={class:"quest-titles"},j={class:"quest-item"},z={class:"quest-items"},L={class:"quest-item"},P={class:"quest-title"},A={class:"quest-point"},M={__name:"record",setup(E){const v=k(),i=n(null),q=n(null),a=n(null),c=n(null);let f=n(null);const g=n(!0),y=n(null),h=function(){return"/"},u=function(s){let t;return s.text.split(" #")[0]=="ðŸŒ¸"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:parseInt(s.text.split("ì„(ë¥¼) ì™„ë£Œí•˜ê³ ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ë²Œì—ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:s.text.split(" #")[0]=="ðŸª½"?t={title:s.text.split("quest ì—ì„œ ")[1]?.split("ì„(ë¥¼)")[0],point:-1*parseInt(s.text.split("ì„(ë¥¼) ëª©ì ìœ¼ë¡œ")[1]?.split(" í¬ì¸íŠ¸ë¥¼ ì†Œëª¨í–ˆì–´ìš”")[0]),final:parseInt(s.text.split("í¬ì¸íŠ¸: ðŸª™ ")[1]?.split(`
`)[0])}:t={title:"",point:0,final:0},t};return I(async()=>{if(i.value=localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):v.query.at?v.query.at:"",!i){y.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),g.value=!1;return}const s=await $fetch(`https://${localStorage.getItem("host")}/api/i`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({})});a.value=s.username,q.value=s;let t=await $fetch(`https://${localStorage.getItem("host")}/api/notes/search-by-tag`,{method:"POST",server:!1,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${a.value}_dailyquest`})});t=t.filter(r=>r.user.username==a.value),c.value=t,t.length!==0&&(f.value=parseInt(t[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(s,t)=>{const r=x;return d(),p("div",N,[e("div",B,[e("div",null,[t[3]||(t[3]=m("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",C,[w(r,{to:h()},{default:S(()=>[...t[2]||(t[2]=[m("ëŒì•„ê°€ê¸°",-1)])]),_:1},8,["to"])])]),e("div",R,"ðŸª™ "+o(_(f)),1)]),e("div",V,[t[6]||(t[6]=e("h2",null,"ðŸŒ¸ ë‚´ì—­ ðŸŒ¸",-1)),t[7]||(t[7]=e("div",null,"ìµœëŒ€ 100ê±´ê¹Œì§€ ë³´ì—¬ì§‘ë‹ˆë‹¤.",-1)),e("div",b,[e("div",O,[e("div",j,[t[4]||(t[4]=e("div",{class:"quest-title"}," ë‚´ì—­ ",-1)),t[5]||(t[5]=e("div",{class:"quest-point"}," ì¦ê° ",-1)),e("div",{class:"quest-point",onClick:t[0]||(t[0]=l=>s.sendNote(s.quest))},"ìµœì¢…")])]),(d(!0),p(T,null,$(_(c),l=>(d(),p("div",z,[e("div",L,[e("div",P,o(u(l).title),1),e("div",A,o(u(l).point),1),e("div",{class:"quest-point",onClick:t[1]||(t[1]=F=>s.sendNote(s.quest))},o(u(l).final),1)])]))),256))])])])}}};export{M as default};
