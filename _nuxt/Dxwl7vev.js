import{_ as R}from"./Clp-vK-3.js";import{r as n,g as S,j as b,c as u,a as e,d as q,b as B,w as O,k as a,t as c,l as w,v as g,m as k,F as L,n as P,o as p}from"./CAc9G0zg.js";const j={id:"parent-wrapper"},z={id:"point-wrapper"},A={class:"quest-done"},I={style:{"font-size":"4rem"}},J={id:"out-wrapper"},U={id:"out-items-wrapper"},D={class:"quest-item"},E={id:"quest-wrapper"},F={id:"quest-items-wrapper"},M={class:"quest-items"},Q={key:0,class:"quest-category"},G={key:1,class:"quest-item"},H={class:"quest-title"},K={class:"quest-point"},W=["onClick"],tt={__name:"index",setup(X){const N=n(null),v=n(null),T=n(null);let _=n(null);const V=n(!0),$=n(null),h=S();var i="",l=0;const r=h.query.at?h.query.at:"",x=function(o){return`/record?at=${o}`},m=function(o){return{title:o.split("- ")[1]?.split(":")[0],point:parseInt(o.split(": ")[1]?.split("í¬ì¸íŠ¸")[0])}};return b(async()=>{if(!r){$.value=new Error("URLì— accessTokenì´ ì—†ìŠµë‹ˆë‹¤."),V.value=!1;return}const o=await $fetch("https://stella.place/api/i",{method:"POST",server:!1,headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({})}),t=o.username;N.value=o;const y=((await $fetch("https://stella.place/api/notes/search-by-tag",{method:"POST",server:!1,headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${t}_dq_list`})}))[0]?.text.split("```\n")[1]?.split("\n```")[0]).split(`
`);v.value=y;let d=await $fetch("https://stella.place/api/notes/search-by-tag",{method:"POST",server:!1,headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({tag:`${t}_dailyquest`})});d=d.filter(C=>C.user.username==t),T.value=d,d.length!==0&&(_.value=parseInt(d[0].text.split("í¬ì¸íŠ¸: ðŸª™ ")[1].split(`
`)[0]))}),(o,t)=>{const f=R;return p(),u("div",j,[e("div",z,[e("div",null,[t[4]||(t[4]=q("ë‚´ê°€ ê°€ì§„ í¬ì¸íŠ¸ ",-1)),e("span",A,[B(f,{to:x(a(r))},{default:O(()=>[...t[3]||(t[3]=[q("ì‚¬ìš©ë‚´ì—­",-1)])]),_:1},8,["to"])])]),e("div",I,"ðŸª™ "+c(a(_)),1)]),e("div",J,[e("div",U,[t[5]||(t[5]=e("div",{class:"quest-category"},[e("h3",null,"ì†Œëª¨í•˜ê¸°")],-1)),e("div",D,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>k(i)?i.value=s:i=s),class:"quest-title",placeholder:"í•­ëª©"},null,512),[[g,a(i)]]),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>k(l)?l.value=s:l=s),class:"quest-point",placeholder:"ê¸ˆì•¡"},null,512),[[g,a(l)]]),e("div",{class:"quest-done",onClick:t[2]||(t[2]=s=>o.spendNote(a(i),a(l)))},"ì†Œëª¨")])])]),e("div",E,[t[6]||(t[6]=e("h2",null,"ðŸŒ¸ ë‚´ í€˜ìŠ¤íŠ¸ ðŸŒ¸",-1)),e("div",F,[(p(!0),u(L,null,P(v.value,s=>(p(),u("div",M,[s[0]!=="-"?(p(),u("div",Q,[e("h3",null,c(s),1)])):(p(),u("div",G,[e("div",H,c(m(s).title),1),e("div",K,c(m(s).point),1),e("div",{class:"quest-done",onClick:y=>o.sendNote(s)},"ì™„ë£Œ",8,W)]))]))),256))])])])}}};export{tt as default};
